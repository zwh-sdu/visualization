<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title></title>
  <style>
    label {
      cursor: pointer;
      display: block;
      padding-left: 5px;
      min-height: 5px;
      margin-bottom: 5px;
    }
  </style>
</head>

<body>

  <div id='visualization'>
    <!-- <div>Genre with global sells on years</div> -->
    <div id='chart' style="width:640px;height:400px;float:left;"></div>
    <div id='controls' style="float:left;">
      <p>Select Regions to Include:</p>
    </div>
  </div>

  <!--[if lt IE 9]><script src="js/excanvas.min.js"></script><![endif]-->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/flot/0.7/jquery.flot.min.js"></script>
  <script>
    $(function () {

      var eas = [[1980, 0.34], [1981, 14.84], [1982, 6.52], [1983, 2.86],
      [1984, 1.85], [1985, 3.52], [1986, 13.74], [1987, 1.12],
      [1988, 1.75], [1989, 4.64], [1990, 6.39], [1991, 6.76],
      [1992, 3.83], [1993, 1.81], [1994, 1.55], [1995, 3.57],
      [1996, 20.58], [1997, 27.58], [1998, 39.44], [1999, 27.78],
      [2000, 34.04], [2001, 59.39], [2002, 86.77], [2003, 67.93],
      [2004, 76.26], [2005, 85.69], [2006, 66.58], [2007, 106.5],
      [2008, 136.39], [2009, 139.36], [2010, 117.64], [2011, 118.96],
      [2012, 122.04], [2013, 125.22], [2014, 99.02], [2015, 70.7],
      [2016, 19.91], [2017, 0.01]
      ];

      var ecs = [[1983, 0.4], [1987, 4.38], [1991, 2.24], [1992, 12.24],
      [1993, 0.07], [1994, 3.74], [1995, 0.72], [1996, 4.19],
      [1997, 4.96], [1998, 9.05], [1999, 7.6], [2000, 2.98],
      [2001, 9.12], [2002, 11.05], [2003, 2.14], [2004, 8.7],
      [2005, 8.53], [2006, 11.47], [2007, 24.39], [2008, 25.02],
      [2009, 20.68], [2010, 16.53], [2011, 15.98], [2012, 5.99],
      [2013, 6.61], [2014, 6.06], [2015, 8.03], [2016, 1.81]
      ];

      var lcn = [[1980, 0.77], [1985, 1.05], [1987, 5.42], [1991, 0.39],
      [1992, 15.25], [1993, 8.75], [1994, 8.47], [1995, 14.85],
      [1996, 18.06], [1997, 11.76], [1998, 31.66], [1999, 14.26],
      [2000, 20.22], [2001, 18.12], [2002, 25.02], [2003, 23.73],
      [2004, 16.78], [2005, 19.72], [2006, 22.55], [2007, 17.61],
      [2008, 35.38], [2009, 32.15], [2010, 14.89], [2011, 22.68],
      [2012, 9.51], [2013, 7.21], [2014, 16.15], [2015, 7.78],
      [2016, 3.86]];

      var mea = [[1980, 2.71], [1982, 0.87], [1983, 2.14], [1984, 1.45],
      [1989, 1.28], [1991, 0.08], [1992, 4.94], [1993, 0.3],
      [1994, 2.86], [1995, 6.4], [1996, 10.68], [1997, 5.69],
      [1998, 11.94], [1999, 20.65], [2000, 15.54], [2001, 16.4],
      [2002, 15.67], [2003, 23.82], [2004, 31.32], [2005, 61.24],
      [2006, 67.35], [2007, 92.27], [2008, 87.03], [2009, 76.94],
      [2010, 96.86], [2011, 56.08], [2012, 22.92], [2013, 25.65],
      [2014, 23.68], [2015, 11.69], [2016, 1.17]
      ];

      var sas = [[1981, 6.93], [1982, 5.03], [1983, 6.93], [1984, 0.69],
      [1985, 43.17], [1986, 9.39], [1987, 1.74], [1988, 27.73],
      [1989, 20.66], [1990, 22.97], [1991, 7.64], [1992, 13.42],
      [1993, 18.67], [1994, 28.74], [1995, 16.69], [1996, 28.23],
      [1997, 21.85], [1998, 29.88], [1999, 20.82], [2000, 16.06],
      [2001, 39.28], [2002, 45.97], [2003, 42.89], [2004, 47.34],
      [2005, 23.56], [2006, 49.8], [2007, 35.59], [2008, 35.7],
      [2009, 41.09], [2010, 31.9], [2011, 28.11], [2012, 18.55],
      [2013, 25.12], [2014, 8.89], [2015, 6.05], [2016, 2.07]


      ];

      var ssf = [[1981, 2.24], [1982, 10.03], [1983, 0.78], [1984, 3.14],
      [1985, 3.21], [1988, 5.58], [1989, 37.75], [1990, 6],
      [1991, 3.24], [1992, 4.84], [1993, 3.17], [1994, 1.53],
      [1995, 2.71], [1996, 3.91], [1997, 5.89], [1998, 6.34],
      [1999, 1.36], [2000, 3.82], [2001, 8], [2002, 5.34],
      [2003, 2.42], [2004, 8.43], [2005, 20.45], [2006, 10.9],
      [2007, 24], [2008, 15.59], [2009, 20.31], [2010, 11.18],
      [2011, 5.11], [2012, 1.76], [2013, 0.99], [2014, 1.5],
      [2015, 0.7]
      ];

      var source = [
        { data: eas, show: true, color: "#E41A1C", name: "Action" },
        { data: ecs, show: true, color: "#377EB8", name: "Adventure" },
        { data: lcn, show: true, color: "#4DAF4A", name: "Fighting" },
        { data: mea, show: true, color: "#984EA3", name: "Misc" },
        { data: sas, show: true, color: "#FF7F00", name: "Platform" },
        { data: ssf, show: true, color: "#FFFF33", name: "Puzzle" },
      ];

      var plotObj = $.plot(
        $("#chart"),
        $.map(
          $.grep(source, function (obj) { return obj.show; }),
          function (obj) { return { data: obj.data, color: obj.color }; }
        )
      );
      $.each(source, function (idx, obj) {
        var input = $("<input>").attr("id", "chk-" + idx).attr("type", "checkbox");
        if (obj.show) {
          $(input).prop("checked", true);
        }
        var span = $("<span>").css({
          'background-color': obj.color,
          'display': "inline-block",
          'height': "1em",
          'width': "1em",
          'margin-right': "0.5em",
        });
        var label = $("<label>").addClass("checkbox").append(input).append(span).append(obj.name);
        $("#controls").append(label);
      });
      $("input[id^='chk-']").click(function (ev) {
        var idx = ev.target.id.substr(4);
        source[idx].show = !source[idx].show
        plotObj.setData(
          $.map(
            $.grep(source, function (obj) { return obj.show; }),
            function (obj) { return { data: obj.data, color: obj.color }; }
          )
        );
        plotObj.draw();
      })
    });
  </script>


</body>

</html>